files:
  fuse/personnel.csv:
    schema: personnel
  fuse/allegation.csv:
    schema: allegation
  fuse/event.csv:
    schema: event
  fuse/use_of_force.csv:
    schema: use_of_force
  fuse/stop_and_search.csv:
    schema: stop_and_search

schemas:
  personnel:
    columns:
      - name: uid
        description: >
          unique identifier for officer, generated by MD5 checksum multiple columns
        unique: true
        no_na: true
      - name: last_name
        description: >
          person last name plus suffix if any
        title_case: true
      - name: middle_name
        description: >
          person middle name
        title_case: true
      - name: middle_initial
        description: >
          initial letter of middle name
        title_case: true
      - name: first_name
        description: >
          person first name
        title_case: true
      - name: birth_year
        integer: true
      - name: birth_month
        integer: true
      - name: birth_day
        integer: true
      - name: race
        options:
          - black
          - white
          - hispanic
          - native american
          - asian / pacific islander
          - mixed
      - name: sex
        options:
          - female
          - male
    validation_tasks:
      - name: birth dates should be valid
        valid_date:
          date_from:
            year_column: birth_year
            month_column: birth_month
            day_column: birth_day
          min_date: "1900-01-01"
  allegation:
    columns:
      - name: uid
        description: >
          accused officer's unique identifier. This references the `uid` column in personnel.csv
      - name: tracking_number
        description: >
          complaint tracking number from the agency the data originate from
      - name: allegation_uid
        description: >
          complaint unique identifier
        unique: true
        no_na: true
      - name: investigation_status
      - name: assigned_department
      - name: assigned_division
      - name: traffic_stop
      - name: body_worn_camera_available
      - name: app_used
      - name: citizen_arrested
      - name: citizen
        description: >
          demographic info of the involved citizen
      - name: initial_disposition
        description: >
          the initial disposition for the complaint
      - name: disposition
        description: >
          the final disposition for the complaint
      - name: rule_code
        description: >
          an allegation is usually consist of a rule and paragraph that was violated. This is
          the code of the violated rule.
      - name: rule_violation
        description: >
          an allegation is usually consist of a rule and paragraph that was violated. This is
          the text of the violated rule.
      - name: paragraph_code
        description: >
          an allegation is usually consist of a rule and paragraph that was violated. This is
          the paragraph number.
      - name: paragraph_violation
        description: >
          an allegation is usually consist of a rule and paragraph that was violated. This is
          the text of the violated paragraph.
      - name: complainant_name
        description: >
          redacted if the complainant isn't a police officer.
      - name: complainant_type
        description: >
          whether the complaint originate from within the agency or from outside
      - name: complainant_sex
        options:
          - female
          - male
      - name: complainant_race
        options:
          - black
          - white
          - hispanic
          - native american
          - asian / pacific islander
          - mixed
      - name: action
        description: >
          what final (disciplinary) actions were taken regarding this complaint
      - name: initial_action
        description: >
          what initial disciplinary action was taken regarding this complaint
      - name: agency
        description: >
          the police department the accused belong to.
      - name: incident_type
        description: >
          This field comes from IPM and seems to contains the same kind of info as
          `complainant_type`. However it contains conflicting info in some places,
          we should investigate more.
      - name: supervisor_uid
        description: >
          supervisor is usually the investigating supervisor. If the supervisor could
          be matched against one of the officers in the same department then this
          references the row with the same `uid` in personnel table.
      - name: supervisor_rank
      - name: badge_no
        description: accused's badge number during incident
      - name: department_code
        description: >
          internal code of the department the accused belonged to during the incident.
          Due to how widely unavailable this field is, it is not very useful.
      - name: department_desc
        description: >
          text description of the department the accused belonged to during the incident.
      - name: rank_desc
        description: >
          text description of the accused's rank during the incident.
      - name: employment_status
        description: >
          whether the accused was fulltime or reserve during incident.
      - name: investigator
      - name: investigator_uid
      - name: investigator_rank
      - name: shift_supervisor
      - name: allegation_desc
        description: >
          text description of the allegation
  event:
    columns:
      - name: event_uid
        description: >
          unique identifier for each event
        unique: true
        no_na: true
      - name: kind
        options:
          - officer_level_1_cert
          - officer_pc_12_qualification
          - officer_rank
          - officer_dept
          - officer_hire
          - officer_left
          - officer_pay_prog_start
          - officer_pay_effective
          - officer_post_decertification
          - complaint_incident
          - complaint_receive
          - allegation_create
          - investigation_start
          - investigation_complete
          - suspension_start
          - suspension_end
          - appeal_file
          - appeal_hearing
          - appeal_hearing_2
          - appeal_receive
          - appeal_render
          - appeal_disposition
          - uof_incident
          - uof_receive
          - uof_assigned
          - uof_completed
          - uof_created
          - uof_due
          - award_receive
          - award_recommended
          - initial_action
          - stop_and_search
        no_na: true
      - name: year
        integer: true
        no_na: true
      - name: month
        integer: true
      - name: day
        integer: true
      - name: time
        match_regex: ^\d{2}:\d{2}$
      - name: raw_date
        description: >
          raw date string from which `year`, `month`, `day` and `time` was extracted.
      - name: uid
        description: >
          officer unique identifer, references the `uid` column in personnel.csv
      - name: allegation_uid
        description: >
          complaint unique identifier, refernces the `allegation_uid` column in complaint.csv
      - name: appeal_uid
        description: >
          appeal hearing unique identifier, references the `appeal_uid` column in
          app_*.csv files.
      - name: uof_uid
        description: >
          unique identifier for a use of force report, references the `uof_uid` column
          in use_of_force.csv.
      - name: agency
        description: >
          the police department that the officer and/or complaint/use of force report
          referred to belong to.
      - name: badge_no
        description: >
          officer's badge number
      - name: employee_id
        description: >
          referred officer's internal employee number.
      - name: department_code
        description: >
          internal code of the department the officer belong to at the time of the event.
          Due to how widely unavailable this field is, it is not very useful.
      - name: department_desc
        description: >
          text description of the department the officer belong to at the time of the
          event.
      - name: division_desc
      - name: sub_division_a_desc
      - name: sub_division_b_desc
      - name: current_supervisor
      - name: employee_class
        description: >
          classification of job titles
      - name: rank_code
        description: >
          internal rank code of the officer at the time of the event. Due to how widely
          unavailable this field is, it is not very useful.
      - name: rank_desc
        description: >
          text description of the officer's rank at the time of the event.
      - name: officer_employment_status
      #   description: >
      #     whether the officer is full time, part time, reserve, ... etc
      - name: sworn
        description: >
          whether the officer is sworn or not
      - name: officer_inactive
        description: >
          whether the officer is still active
      - name: employee_type
        description: >
          whether the officer is commissioned or not.
      - name: years_employed
        integer: true
      - name: salary
        float: true
      - name: salary_freq
        options:
          - hourly
          - daily
          - weekly
          - bi-weekly
          - monthly
          - yearly
      - name: award
        description: >
          award given to the officer
      - name: award_comments
        description: >
          further description of the award
      - name: left_reason
    validation_tasks:
      - name: event dates should be valid
        valid_date:
          date_from:
            year_column: year
            month_column: month
            day_column: day
          min_date: "1900-01-01"
      - name: no officer with more than 1 left date in a calendar month
        where:
          column: kind
          op: equal
          value: officer_left
        group_by: uid
        no_more_than_once_per_30_days:
          date_from:
            year_column: year
            month_column: month
            day_column: day
  use_of_force:
    columns:
      - name: uof_uid
        description: >
          unique identifier of use of force report.
        unique: true
        no_na: true
      - name: uof_tracking_number
        description: >
          tracking number of use of force report from the originating agency.
      - name: report_year
        description: >
          year of report
      - name: uid
        description: >
          officer unique identifier, this references the `uid` column from personnel.csv
      - name: force_description
        description: >
          summary of force used
      - name: force_type
      - name: force_level
      - name: effective_uof
      - name: accidental_discharge
      - name: less_than_lethal
      - name: status
      - name: source
      - name: service_type
      - name: county
      - name: traffic_stop
      - name: sustained
      - name: force_reason
      - name: weather_description
      - name: distance_from_officer
      - name: body_worn_camera_available
      - name: app_used
      - name: citizen_uid
        description: >
          unique identifier for each citizen involved in a report.
      - name: citizen_arrested
      - name: citizen_hospitalized
      - name: citizen_injured
      - name: citizen_body_type
      - name: citizen_height
      - name: citizen_age
        integer: true
      - name: citizen_involvement
      - name: disposition
      - name: citizen_sex
        options:
          - female
          - male
      - name: citizen_race
        options:
          - black
          - white
          - hispanic
          - native american
          - asian / pacific islander
          - mixed
      - name: citizen_age_1
        integer: true
      - name: officer_current_supervisor
      - name: officer_title
      - name: officer_injured
      - name: officer_age
        integer: true
      - name: officer_years_exp
        integer: true
      - name: officer_years_with_unit
        integer: true
      - name: officer_type
      - name: officer_employment_status
      - name: officer_department
      - name: officer_division
      - name: officer_sub_division_a
      - name: officer_sub_division_b
      - name: agency
        description: >
          the police department this report originate from.
  appeal_hearing:
    columns:
      - name: appeal_uid
        description: unique per docket_no and uid
      - name: docket_no
      - name: uid
      - name: counsel
      - name: charging_supervisor
      - name: resolution
      - name: action
      - name: delay
      - name: appealed
      - name: agency
  stop_and_search:
    columns:
      - name: stop_and_search_uid
        description: >
          unique identifier of stop and search report.
        unique: true
        no_na: true
      - name: stop_and_search_interview_id
      - name: stop_and_search_interview_id_2
      - name: item_number
      - name: id
      - name: district
      - name: zone
      - name: stop_reason
      - name: vehicle_year
      - name: vehicle_make
      - name: vehicle_model
      - name: vehicle_style
      - name: vehicle_color
      - name: vehicle_number
      - name: citizen_id
      - name: citizen_race
      - name: citizen_height
      - name: citizen_weight
      - name: citizen_hair_color
      - name: citizen_gender
      - name: citizen_eye_color
      - name: citizen_driver_license_state
      - name: zip_code
      - name: stop_and_search_location
      - name: assigned_district
      - name: assigned_department
      - name: stop_results
      - name: subject_type
      - name: search_occurred
      - name: evidence_seized
      - name: evidence_types
      - name: strip_body_cavity_search
      - name: legal_basis
      - name: consent_to_search
      - name: consent_form_completed
      - name: search_types
      - name: exit_vehicle
      - name: rank_desc
      - name: first_name
      - name: middle_name
      - name: last_name
      - name: badge_number
      - name: stop_and_search_year
      - name: stop_and_search_month
      - name: stop_and_search_day
      - name: stop_and_search_time
      - name: agency
      - name: uid

save_bad_rows_to: invalid_rows.csv
