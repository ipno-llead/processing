files:
  data/fuse/personnel.csv:
    schema: personnel
  data/fuse/allegation.csv:
    schema: allegation
  data/fuse/event.csv:
    schema: event
  data/fuse/use_of_force.csv:
    schema: use_of_force
  data/fuse/stop_and_search.csv:
    schema: stop_and_search
  data/fuse/appeals.csv:
    schema: appeal_hearing
  data/fuse/brady.csv:
    schema: brady
  data/fuse/uof_citizens.csv:
    schema: uof_citizen
  data/fuse/uof_officers.csv:
    schema: uof_officer
  data/fuse/awards.csv:
    schema: award
  data/fuse/property_claims.csv:
    schema: property_claims
  data/fuse/post_officer_history.csv:
    schema: post_officer_history
  data/fuse/settlements.csv:
    schema: settlement
  data/fuse/docs.csv:
    schema: docs

schemas:
  personnel:
    columns:
      - name: uid
        description: >
          unique identifier for officer, generated by MD5 checksum multiple columns
        unique: true
        no_na: true
      - name: last_name
        description: >
          person last name plus suffix if any
        title_case: true
      - name: middle_name
        description: >
          person middle name
        title_case: true
      - name: first_name
        description: >
          person first name
        title_case: true
      - name: birth_year
        integer: true
      - name: birth_month
        integer: true
      - name: birth_day
        integer: true
      - name: race
        options:
          - black
          - white
          - hispanic
          - native american
          - asian / pacific islander
          - mixed
      - name: sex
        options:
          - female
          - male
      - name: agency
    validation_tasks:
      - name: birth dates should be valid
        valid_date:
          date_from:
            year_column: birth_year
            month_column: birth_month
            day_column: birth_day
          min_date: "1900-01-01"
  allegation:
    columns:
      - name: uid
        description: >
          accused officer's unique identifier. This references the `uid` column in personnel.csv
      - name: tracking_id
        description: >
          internal affairs complaint tracking id from the agency the data originate from
      - name: case_number
        description: >
          administrative complaint tracking id from the agency the data originate from
      - name: allegation_uid
        description: >
          complaint unique identifier
        unique: true
        no_na: true
      - name: allegation
      - name: investigation_status
      - name: assigned_department
      - name: assigned_division
      - name: traffic_stop
      - name: body_worn_camera_available
      - name: app_used
      - name: citizen_arrested
      - name: disposition
        description: >
          the final disposition for the complaint
      - name: complainant_name
        description: >
          redacted if the complainant isn't a police officer.
      - name: complainant_type
        description: >
          whether the complaint originate from within the agency or from outside
      - name: complainant_sex
        options:
          - female
          - male
      - name: complainant_race
        options:
          - black
          - white
          - hispanic
          - native american
          - asian / pacific islander
          - mixed
      - name: action
        description: >
          what final (disciplinary) actions were taken regarding this complaint
      - name: initial_action
        description: >
          what initial disciplinary action was taken regarding this complaint
      - name: agency
        description: >
          the police department the accused belong to.
      - name: source_agency
        description: >
          This field describes from where the data was sourced. This column should only be populated
          if the data was sourced from an agency other than where the accused is/was employed.
          For example, POST, District Attorney's Office, News, etc.
      - name: incident_type
        description: >
          This field comes from IPM and seems to contains the same kind of info as
          `complainant_type`. However it contains conflicting info in some places,
          we should investigate more.
      - name: supervisor_uid
        description: >
          supervisor is usually the investigating supervisor. If the supervisor could
          be matched against one of the officers in the same department then this
          references the row with the same `uid` in personnel table.
      - name: supervisor_rank
      - name: badge_no
        description: accused's badge number during incident
      - name: department_code
        description: >
          internal code of the department the accused belonged to during the incident.
          Due to how widely unavailable this field is, it is not very useful.
      - name: department_desc
        description: >
          text description of the department the accused belonged to during the incident.
      - name: employment_status
        description: >
          whether the accused was fulltime or reserve during incident.
      - name: investigator
      - name: investigator_uid
      - name: investigator_rank
      - name: shift_supervisor
      - name: allegation_desc
        description: >
          narrative form text description of allegation
      - name: allegation_sub_desc
        description: >
          policy/manual text description of allegation
      - name: investigating_department
        description: >
          small departments frequently turnover internal investigations to the sheriff's office
      - name: referred_by
      - name: incident_location
      - name: disposition_desc
        description: >
          text description of aftermath of disposition, or reason for disposition.
      - name: item_number
      - name: citizen_race
      - name: citizen_sex
      - name: citizen_age
      - name: letter_subject
        description: >
          text description of investigative letter
      - name: report_subject
        description: >
          text description of investigative report
      - name: race
      - name: sex
      - name: age
  event:
    columns:
      - name: event_uid
        description: >
          unique identifier for each event
        unique: true
        no_na: true
      - name: kind
        options:
          - officer_level_1_cert
          - officer_pc_12_qualification
          - officer_rank
          - officer_dept
          - officer_hire
          - officer_left
          - officer_pay_prog_start
          - officer_pay_effective
          - officer_post_decertification
          - complaint_incident
          - complaint_receive
          - allegation_create
          - investigation_start
          - investigation_complete
          - suspension_start
          - suspension_end
          - appeal_file
          - appeal_hearing
          - appeal_receive
          - appeal_render
          - appeal_disposition
          - uof_occur
          - uof_receive
          - uof_assigned
          - uof_completed
          - uof_created
          - uof_due
          - award_receive
          - award_recommended
          - initial_action
          - stop_and_search
          - claim_made
          - claim_receive
          - claim_occur
          - claim_closed
          - brady_list
          - board_hearing
        no_na: true
      - name: year
        integer: true
        no_na: true
      - name: month
      - name: day
        integer: true
      - name: time
        match_regex: ^\d{2}:\d{2}$
      - name: raw_date
        description: >
          raw date string from which `year`, `month`, `day` and `time` was extracted.
      - name: uid
        description: >
          officer unique identifer, references the `uid` column in personnel.csv
      - name: allegation_uid
        description: >
          complaint unique identifier, references the `allegation_uid` column in complaint.csv
      - name: appeal_uid
        description: >
          appeal hearing unique identifier, references the `appeal_uid` column in
          app_*.csv files.
      - name: uof_uid
        description: >
          unique identifier for a use of force report, references the `uof_uid` column
          in use_of_force.csv.
      - name: agency
        description: >
          the police department that the officer and/or complaint/use of force report
          referred to belong to.
      - name: badge_no
        description: >
          officer's badge number
      - name: employee_id
        description: >
          referred officer's internal employee number.
      - name: department_code
        description: >
          internal code of the department the officer belong to at the time of the event.
          Due to how widely unavailable this field is, it is not very useful.
      - name: department_desc
        description: >
          text description of the department the officer belong to at the time of the
          event.
      - name: division_desc
      - name: sub_division_a_desc
      - name: sub_division_b_desc
      - name: unit_desc
      - name: unit_sub_desc
      - name: current_supervisor
      - name: employee_class
        description: >
          classification of job titles
      - name: rank_code
        description: >
          internal rank code of the officer at the time of the event. Due to how widely
          unavailable this field is, it is not very useful.
      - name: rank_desc
        description: >
          text description of the officer's rank at the time of the event.
      - name: employment_status
      #   description: >
      #     whether the officer is full time, part time, reserve, ... etc
      - name: sworn
        description: >
          whether the officer is sworn or not
      - name: officer_inactive
        description: >
          whether the officer is still active
      - name: employee_type
        description: >
          whether the officer is commissioned or not.
      - name: years_employed
        integer: true
      - name: salary
        float: true
      - name: salary_year
      - name: overtime_and_detail_annual_total
      - name: overtime_and_detail_annual_year
      - name: salary_freq
        options:
          - hourly
          - daily
          - weekly
          - bi-weekly
          - monthly
          - yearly
      - name: award
        description: >
          award given to the officer
      - name: award_comments
        description: >
          further description of the award
      - name: left_reason
      - name: left_reason_desc
        description: >
          narrative summary of the officer's reason for leaving
      - name: years_of_service
      - name: source_agency
      - name: brady_uid
    validation_tasks:
      - name: event dates should be valid
        valid_date:
          date_from:
            year_column: year
            month_column: month
            day_column: day
          min_date: "1900-01-01"
      - name: no officer with more than 1 left date in a calendar month
        where:
          column: kind
          op: equal
          value: officer_left
        group_by: uid
        no_more_than_once_per_30_days:
          date_from:
            year_column: year
            month_column: month
            day_column: day
  use_of_force:
    columns:
      - name: uof_uid
        description: >
          unique identifier of use of force report.
        unique: true
        no_na: true
      - name: tracking_id
        description: >
          tracking id of use of force report from the originating agency.
      - name: investigation_status
      - name: service_type
      - name: light_condition
      - name: weather_condition
      - name: shift_time
      - name: disposition
      - name: division
      - name: division_level
      - name: unit
      - name: originating_bureau
      - name: agency
        description: >
          the police department this report originate from.
      - name: use_of_force_reason
  appeal_hearing:
    columns:
      - name: appeal_uid
        description: >
          unique per docket_no and uid
      - name: tracking_id
      - name: uid
      - name: counsel
      - name: charging_supervisor
      - name: appeal_disposition
      - name: action_appealed
      - name: appealed
      - name: agency
      - name: motions
  stop_and_search:
    columns:
      - name: stop_and_search_uid
        description: >
          unique identifier of stop and search report.
        unique: true
        no_na: true
      - name: tracking_id
      - name: item_number
      - name: id
      - name: district
      - name: zone
      - name: stop_reason
      - name: vehicle_year
      - name: vehicle_make
      - name: vehicle_model
      - name: vehicle_style
      - name: vehicle_color
      - name: vehicle_number
      - name: citizen_id
      - name: citizen_race
      - name: citizen_height
      - name: citizen_weight
      - name: citizen_hair_color
      - name: citizen_gender
      - name: citizen_eye_color
      - name: citizen_driver_license_state
      - name: zip_code
      - name: stop_and_search_location
      - name: assigned_district
      - name: assigned_department
      - name: stop_results
      - name: subject_type
      - name: search_occurred
      - name: evidence_seized
      - name: evidence_types
      - name: strip_body_cavity_search
      - name: legal_basis
      - name: consent_to_search
      - name: consent_form_completed
      - name: search_types
      - name: exit_vehicle
      - name: first_name
      - name: middle_name
      - name: last_name
      - name: badge_number
      - name: stop_and_search_year
      - name: stop_and_search_month
      - name: stop_and_search_day
      - name: stop_and_search_time
      - name: agency
      - name: uid
  brady:
    columns:
      - name: brady_uid
        description: >
          unique brady uid
      - name: uid
      - name: tracking_number
      - name: allegation
      - name: initial_disposition
      - name: disposition
      - name: action
      - name: allegation_desc
      - name: court_location
      - name: agency
      - name: source_agency
      - name: charging_agency
  uof_citizen:
    columns:
      - name: uof_citizen_uid
        description: >
          unique identifier of citizen.
      - name: uof_uid
        description: >
          unique identifer of use of force report.
      - name: citizen_influencing_factors
      - name: citizen_distance_from_officer
      - name: citizen_arrested
      - name: citizen_arrest_charges
      - name: citizen_hospitalized
      - name: citizen_injured
      - name: citizen_age
      - name: citizen_race
      - name: citizen_sex
      - name: agency
  uof_officer:
    columns:
      - name: uid
        description: >
          unique identifier of officer.
      - name: uof_uid
        description: >
          unique identifier of use of force report.
      - name: use_of_force_description
      - name: use_of_force_level
      - name: use_of_force_effective
      - name: age
      - name: years_of_service
      - name: officer_injured
      - name: agency
  award:
    columns:
      - name: award_uid
        description: >
          unique identifier of award.
        unique: true
        no_na: true
      - name: agency
  property_claims:
    columns:
      - name: property_claims_uid
        description: >
          unique identifier of property claim.
        unique: true
        no_na: true
      - name: uid
      - name: agency
      - name: tracking_id
      - name: jurisdiction
      - name: accident_desc
      - name: accident_location
      - name: total_paid
      - name: department_desc
      - name: property_damage_current
      - name: property_damage_paid
      - name: property_damage_open
      - name: property_damage_incurred
      - name: property_damage_sub
  post_officer_history:
    columns:
      - name: history_id
        description: >
          unique identifier of post officer history report
      - name: uid
        description: >
          unique identifier of officer
        unique: true
        no_na: true
      - name: agency
      - name: left_reason
  settlement:
    columns:
      - name: settlement_uid
        description: >
          unique identifier of case
      - name: case_number
      - name: case_name
      - name: case_disposition
      - name: claim_status
      - name: settlement_amount
      - name: settlement_amount_desc
      - name: original_judgment_principal
      - name: check_date
      - name: final_judgement_date
      - name: pay_year
      - name: agency
  docs:
    columns:
      - name: docid
        description: >
          unique identifier of doc generated at meta stage
      - name: text
      - name: title
      - name: doc_year
      - name: doc_month
      - name: doc_day
      - name: pdf_db_content_hash
      - name: pdf_db_path
      - name: pdf_db_id
      - name: agency
      - name: matched_uid
        description: >
          uid of officer matched to the doc


save_bad_rows_to: data/invalid_rows.csv
